<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-{scpre : 8}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PseudoRandom - Dev Sandbox</title>

    <!-- p5 
    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/p5.min.js"></script>
    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/addons/p5.dom.min.js"></script>-->
    <!-- local p5-->
    <script language="javascript" type="text/javascript" src="local dependencies/p5.min.js"></script>
    <script language="javascript" type="text/javascript" src="local dependencies/p5.dom.min.js"></script>

    <!-- FONTS -- IRRELEVANT IN LOCAL-->
    <link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">

    <!-- Pure CSS 
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous"> -->
    <!-- Local Pure CSS -->
    <link rel="stylesheet" href="local dependencies/purecss.css"> 
    
    <link href="./style/main.css" rel="stylesheet" />
    <link href="./style/editorItems.css" rel="stylesheet" />
</head>
<body>
    <div id="page_content">
        <div id="vendorInfo">
            <input type="text" placeholder="Filter Name" id="filterName" onchange="writeItemsList('itemsList', itemsList)"/> 
            <input type="text" placeholder="Filter Slots" id="filterSlots" onchange="writeItemsList('itemsList', itemsList)"/> 
        </div>
        <div id="itemsList"> </div>
    </div>
    <div id="scripts">
        <!-- Camera is the class responsible for drawing most things on the canvas. -->
        <script src="scripts/Camera.js"> </script>
        <!-- Troop is the class allowing to roll dices and basically play the game. -->
        <script src="scripts/Troop.js"> </script>
        <!-- Util is basically all the shared code, so yeah, it's always gun'be messy there. -->
        <script src="scripts/util.js"> </script>


        <script src="local dependencies/mockItems.js"> </script>
        <script>
            let modifierTypes = ["abilityScoreIncrease","armorClass", "armorClassBonus", "hitDieAmount", "hitDieIncrease", "action","actionMod", "pool", "condition"];
            let equipmentSlots = ["Forehead", "Ears", "Neck", "Shoulders", "Left Hand", "Right Hand", "Both Hands", "Fingers", "Body", "Feet"];
            let abilityScores = ["Strength", "Dexterity", "Constitution", "Intelligence", "Wisdom", "Charisma"]
            let itemsList = [];
            function setup()
            {
                noiseSeed("PseudoRandom")
                for(let i = 0; i < mundaneWeapons.length; i++)
                {
                    mundaneWeapons[i].cost = floor(map(noise(i), 0,1, 1,15));
                    itemsList.push(mundaneWeapons[i]);
                }
                createMagicalWeapons(itemsList, itemsList.length)
                createPlusOnetoThreeWeapons(itemsList, itemsList.length)
                createJaggedMasterworkWeapons(itemsList, itemsList.length)
                createElementalWeapons(itemsList, itemsList.length)

                addArmors(itemsList)
                addRandom(itemsList);
                addAbilityScoreItems(itemsList)
                writeItemsList("itemsList", itemsList);
            }
            
            function createMagicalWeapons(list, listSize)
            {
                for(let i = 0; i < listSize; i++)
                {
                    let item = list[i];

                    let magicalItem = 
                    {
                        "name" : "Magical " + item.name,
                        "cost" : item.cost + floor(map(noise(i + 1), 0,1, 15,35)),
                        "slots" : item.slots,
                        "modifiers" : []
                    };
                    
                    for(let mod= 0; mod < item.modifiers.length; mod++)
                    {
                        let modifier = item.modifiers[mod];
                        if(modifier.type == "action" && modifier.value.condition === undefined)
                        {
                            let one = {type : "action", value : 
                            {
                                "name": modifier.value.name,
                                "uses": modifier.value.uses,
                                "pool": modifier.value.pool,
                                "expandsPool" : modifier.value.expandsPool,
                                "target": modifier.value.target,
                                "areaEffect": modifier.value.areaEffect,
                                "reach" : modifier.value.reach,
                                "toHit": modifier.value.toHit,
                                "damage": modifier.value.damage,
                                "damageAbility": modifier.value.damageAbility,
                                "damageType": "Magical",
                                "damageExtra" : modifier.value.damageExtra,
                                "toHitExtra" : modifier.value.toHitExtra
                            } };
                            magicalItem.modifiers.push(one);
                        }
                        else
                        {
                            magicalItem.modifiers.push(modifier);
                        }
                    }
                    list.push(magicalItem);
                }
            }
            function createPlusOnetoThreeWeapons(list, listSize)
            {
                for(let i = 0; i < listSize; i++)
                {
                    let item = list[i];
                    let plusOne = 
                    {
                        "name" : item.name + " + 1",
                        "cost" : item.cost + floor(map(noise(i + 2), 0, 1, 35,65)),
                        "slots" : item.slots,
                        "modifiers" : []
                    };
                    let plusTwo = 
                    {
                        "name" : item.name + " + 2",
                        "cost" : item.cost + floor(map(noise(i + 3), 0, 1, 125,195)),
                        "slots" : item.slots,
                        "modifiers" : []
                    };
                    let plusThree = 
                    {
                        "name" : item.name + " + 3",
                        "cost" : item.cost + floor(map(noise(i + 3), 0, 1, 750,1250)),
                        "slots" : item.slots,
                        "modifiers" : []
                    };
                    
                    for(let mod= 0; mod < item.modifiers.length; mod++)
                    {
                        let modifier = item.modifiers[mod];
                        if(modifier.type == "action" && modifier.value.condition == undefined)
                        {
                            let one = {type : "action", value : 
                            {
                                "name": modifier.value.name,
                                "uses": modifier.value.uses,
                                "pool": modifier.value.pool,
                                "target": modifier.value.target,
                                "areaEffect": modifier.value.areaEffect,
                                "reach" : modifier.value.reach,
                                "toHit": modifier.value.toHit,
                                "damage": modifier.value.damage,
                                "damageAbility": modifier.value.damageAbility,
                                "damageType": modifier.value.damageType,
                                "damageExtra" : 1,
                                "toHitExtra" : 1
                            } };
                            plusOne.modifiers.push(one);
                            let two = {type : "action", value : 
                            {
                                "name": modifier.value.name,
                                "uses": modifier.value.uses,
                                "pool": modifier.value.pool,
                                "target": modifier.value.target,
                                "areaEffect": modifier.value.areaEffect,
                                "reach" : modifier.value.reach,
                                "toHit": modifier.value.toHit,
                                "damage": modifier.value.damage,
                                "damageAbility": modifier.value.damageAbility,
                                "damageType": modifier.value.damageType,
                                "damageExtra" : 2,
                                "toHitExtra" : 2
                            } };
                            plusTwo.modifiers.push(two);

                            let three = {type : "action", value : 
                            {
                                "name": modifier.value.name,
                                "uses": modifier.value.uses,
                                "pool": modifier.value.pool,
                                "target": modifier.value.target,
                                "areaEffect": modifier.value.areaEffect,
                                "reach" : modifier.value.reach,
                                "toHit": modifier.value.toHit,
                                "damage": modifier.value.damage,
                                "damageAbility": modifier.value.damageAbility,
                                "damageType": modifier.value.damageType,
                                "damageExtra" : 3,
                                "toHitExtra" : 3
                            } };
                            plusThree.modifiers.push(three);
                        }
                        else
                        {
                            plusOne.modifiers.push(modifier);
                            plusTwo.modifiers.push(modifier);
                            plusThree.modifiers.push(modifier);
                        }
                    }
                    list.push(plusOne);
                    list.push(plusTwo);
                    list.push(plusThree);
                }
            }
            function createJaggedMasterworkWeapons(list, listSize)
            {
                for(let i = 0; i < listSize; i++)
                {
                    let item = list[i];
                    let masterwork = 
                    {
                        "name" : "Masterwork " +  item.name,
                        "cost" : item.cost + floor(map(noise(i + 7), 0,1, 75,125)),
                        "slots" : item.slots,
                        "modifiers" : []
                    };
                    let jagged = 
                    {
                        "name" : "Jagged " + item.name,
                        "cost" : item.cost + floor(map(noise(i + 8), 0,1, 75,125)),
                        "slots" : item.slots,
                        "modifiers" : []
                    };
                    for(let mod= 0; mod < item.modifiers.length; mod++)
                    {
                        let modifier = item.modifiers[mod];
                        if(modifier.type == "action" && modifier.value.condition == undefined)
                        {
                            let mW = {type : "action", value : 
                            {
                                "name": modifier.value.name,
                                "uses": modifier.value.uses,
                                "pool": modifier.value.pool,
                                "target": modifier.value.target,
                                "areaEffect": modifier.value.areaEffect,
                                "reach" : modifier.value.reach,
                                "toHit": modifier.value.toHit,
                                "damage": modifier.value.damage,
                                "damageAbility": modifier.value.damageAbility,
                                "damageType": modifier.value.damageType,
                                "damageExtra" : modifier.value.damageExtra || 0,
                                "toHitExtra" :  modifier.value.toHitExtra + 1
                            } };
                            masterwork.modifiers.push(mW);

                            let jg = {type : "action", value : 
                            {
                                "name": modifier.value.name,
                                "uses": modifier.value.uses,
                                "pool": modifier.value.pool,
                                "target": modifier.value.target,
                                "areaEffect": modifier.value.areaEffect,
                                "reach" : modifier.value.reach,
                                "toHit": modifier.value.toHit,
                                "damage": modifier.value.damage,
                                "damageAbility": modifier.value.damageAbility,
                                "damageType": modifier.value.damageType,
                                "damageExtra" : modifier.value.damageExtra + 1,
                                "toHitExtra" :  modifier.value.toHitExtra || 0
                            } };
                            jagged.modifiers.push(jg);
                        }
                        else
                        {
                            masterwork.modifiers.push(modifier);
                            jagged.modifiers.push(modifier);
                        }
                    }
                    list.push(masterwork);
                    list.push(jagged);
                }
            }
            function createElementalWeapons(list, listSize)
            {
                for(let i = 0; i < listSize; i++)
                {
                    let item = list[i];
                    if(!item.name.includes("Magical") )
                    {
                        let fiery = 
                        {
                            "name" : "Fiery " + item.name,
                            "cost" : item.cost + floor(map(noise(i + 15), 0,1, 450,550)),
                            "slots" : item.slots,
                            "modifiers" : []
                        };
                        let frozen = 
                        {
                            "name" : "Frozen " + item.name,
                            "cost" : item.cost + floor(map(noise(i + 16), 0,1, 450,550)),
                            "slots" : item.slots,
                            "modifiers" : []
                        };    
                        let thunderous = 
                        {
                            "name" : "Thunderous " + item.name,
                            "cost" : item.cost + floor(map(noise(i + 17), 0,1, 450,550)),
                            "slots" : item.slots,
                            "modifiers" : []
                        };
                        let acidic = 
                        {
                            "name" : "Acidic " + item.name,
                            "cost" : item.cost + floor(map(noise(i + 18), 0,1, 550,750)),
                            "slots" : item.slots,
                            "modifiers" : []
                        };

                        let force = 
                        {
                            "name" : "Forceful " + item.name,
                            "cost" : item.cost + floor(map(noise(i + 19), 0,1, 450,550)),
                            "slots" : item.slots,
                            "modifiers" : []
                        };
                        let psych = 
                        {
                            "name" : "Psychic " + item.name,
                            "cost" : item.cost + floor(map(noise(i + 20), 0,1, 550,750)),
                            "slots" : item.slots,
                            "modifiers" : []
                        };

                        let poisoned = 
                        {
                            "name" : "Poisoned " + item.name,
                            "cost" : item.cost + floor(map(noise(i + 21), 0,1, 550,750)),
                            "slots" : item.slots,
                            "modifiers" : []
                        };
                        let necrotic = 
                        {
                            "name" : "Necrotic " + item.name,
                            "cost" : item.cost + floor(map(noise(i + 22), 0,1, 1550,1750)),
                            "slots" : item.slots,
                            "modifiers" : []
                        };
                        
                        let blessed = 
                        {
                            "name" : "Blessed " + item.name,
                            "cost" : item.cost + floor(map(noise(i + 23), 0,1, 550,750)),
                            "slots" : item.slots,
                            "modifiers" : []
                        };

                        for(let mod= 0; mod < item.modifiers.length; mod++)
                        {
                            let modifier = item.modifiers[mod];
                            if(modifier.type == "action" && modifier.value.condition === undefined)
                            {
                                let d;
                                if(modifier.value.damage !== undefined && modifier.value.damage.match(/[0-9]+d[0-9]+/))
                                { 
                                    let t = modifier.value.damage.match(/([0-9])+d([0-9]+)/);  
                                    d = (Number.parseInt(t[1]) + 1) + "d" + t[2]; 
                                }
                                if(modifier.value.damage !== undefined && modifier.value.damage == 1){ d = "1d6" }

                                let fire = {type : "action", value : 
                                { "damageType" : "Fire", "damage" : d, "name": modifier.value.name,"uses": modifier.value.uses,"pool": modifier.value.pool,"expandsPool" : modifier.value.expandsPool,"target": modifier.value.target,"areaEffect": modifier.value.areaEffect,"reach" : modifier.value.reach,"toHit": modifier.value.toHit,"damageAbility": modifier.value.damageAbility,"damageExtra" : modifier.value.damageExtra, "toHitExtra" : modifier.value.toHitExtra } };
                                fiery.modifiers.push(fire);

                                let cold = {type : "action", value : 
                                { "damageType" : "Cold", "damage" : d, "name": modifier.value.name,"uses": modifier.value.uses,"pool": modifier.value.pool,"expandsPool" : modifier.value.expandsPool,"target": modifier.value.target,"areaEffect": modifier.value.areaEffect,"reach" : modifier.value.reach,"toHit": modifier.value.toHit,"damageAbility": modifier.value.damageAbility,"damageExtra" : modifier.value.damageExtra, "toHitExtra" : modifier.value.toHitExtra } };
                                frozen.modifiers.push(cold);

                                let lightning = {type : "action", value : 
                                { "damageType" : "Lightning", "damage" : d, "name": modifier.value.name,"uses": modifier.value.uses,"pool": modifier.value.pool,"expandsPool" : modifier.value.expandsPool,"target": modifier.value.target,"areaEffect": modifier.value.areaEffect,"reach" : modifier.value.reach,"toHit": modifier.value.toHit,"damageAbility": modifier.value.damageAbility,"damageExtra" : modifier.value.damageExtra, "toHitExtra" : modifier.value.toHitExtra } };
                                thunderous.modifiers.push(lightning);

                                let acid = {type : "action", value : 
                                { "damageType" : "Acid", "damage" : d, "name": modifier.value.name,"uses": modifier.value.uses,"pool": modifier.value.pool,"expandsPool" : modifier.value.expandsPool,"target": modifier.value.target,"areaEffect": modifier.value.areaEffect,"reach" : modifier.value.reach,"toHit": modifier.value.toHit,"damageAbility": modifier.value.damageAbility,"damageExtra" : modifier.value.damageExtra, "toHitExtra" : modifier.value.toHitExtra } };
                                acidic.modifiers.push(acid);

                                let f = {type : "action", value : 
                                { "damageType" : "Force", "damage" : d, "name": modifier.value.name,"uses": modifier.value.uses,"pool": modifier.value.pool,"expandsPool" : modifier.value.expandsPool,"target": modifier.value.target,"areaEffect": modifier.value.areaEffect,"reach" : modifier.value.reach,"toHit": modifier.value.toHit,"damageAbility": modifier.value.damageAbility,"damageExtra" : modifier.value.damageExtra, "toHitExtra" : modifier.value.toHitExtra } };
                                force.modifiers.push(f);

                                let p = {type : "action", value : 
                                { "damageType" : "Psychic", "damage" : d, "name": modifier.value.name,"uses": modifier.value.uses,"pool": modifier.value.pool,"expandsPool" : modifier.value.expandsPool,"target": modifier.value.target,"areaEffect": modifier.value.areaEffect,"reach" : modifier.value.reach,"toHit": modifier.value.toHit,"damageAbility": modifier.value.damageAbility,"damageExtra" : modifier.value.damageExtra, "toHitExtra" : modifier.value.toHitExtra } };
                                psych.modifiers.push(p);

                                let pois = {type : "action", value : 
                                { "damageType" : "Psychic", "damage" : d, "name": modifier.value.name,"uses": modifier.value.uses,"pool": modifier.value.pool,"expandsPool" : modifier.value.expandsPool,"target": modifier.value.target,"areaEffect": modifier.value.areaEffect,"reach" : modifier.value.reach,"toHit": modifier.value.toHit,"damageAbility": modifier.value.damageAbility,"damageExtra" : modifier.value.damageExtra, "toHitExtra" : modifier.value.toHitExtra } };
                                poisoned.modifiers.push(pois);

                                let necro = {type : "action", value : 
                                { "damageType" : "Necrotic", "damage" : d, "isVampiric" : true, "name": modifier.value.name,"uses": modifier.value.uses,"pool": modifier.value.pool,"expandsPool" : modifier.value.expandsPool,"target": modifier.value.target,"areaEffect": modifier.value.areaEffect,"reach" : modifier.value.reach,"toHit": modifier.value.toHit,"damageAbility": modifier.value.damageAbility,"damageExtra" : modifier.value.damageExtra, "toHitExtra" : modifier.value.toHitExtra } };
                                necrotic.modifiers.push(necro);

                                
                                let bless = {type : "action", value : 
                                { "damageType" : "Radiant", "damage" : d, "name": modifier.value.name,"uses": modifier.value.uses,"pool": modifier.value.pool,"expandsPool" : modifier.value.expandsPool,"target": modifier.value.target,"areaEffect": modifier.value.areaEffect,"reach" : modifier.value.reach,"toHit": modifier.value.toHit,"damageAbility": modifier.value.damageAbility,"damageExtra" : modifier.value.damageExtra, "toHitExtra" : modifier.value.toHitExtra } };
                                blessed.modifiers.push(bless);
                            }
                            else
                            {
                                fiery.modifiers.push(modifier);
                                frozen.modifiers.push(modifier);
                                thunderous.modifiers.push(modifier);
                                acidic.modifiers.push(modifier);
                                force.modifiers.push(modifier);
                                psych.modifiers.push(modifier);
                                poisoned.modifiers.push(modifier);
                                necrotic.modifiers.push(modifier);
                                blessed.modifiers.push(modifier);

                            }
                        }
                        list.push(fiery);
                        list.push(frozen);
                        list.push(thunderous);
                        list.push(acidic);
                        list.push(force);
                        list.push(psych);
                        list.push(poisoned);
                        list.push(necrotic);
                        list.push(blessed);
                    }
                }
            }
            function addArmors(list)
            {
                let basicArmors = [{"name":"Breastplate","cost":"400","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":14,"ability":"Dexterity","maximum":2}}]},{"name":"Chain Mail","cost":"75","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":16}}]},{"name":"Chain Shirt","cost":"50","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":13,"ability":"Dexterity","maximum":2}}]},{"name":"Half Plate Armor","cost":"750","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":15,"ability":"Dexterity","maximum":2}}]},{"name":"Hide Armor","cost":"10","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":12,"ability":"Dexterity","maximum":2}}]},{"name":"Leather Armor","cost":"10","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":11,"ability":"Dexterity"}}]},{"name":"Padded Armor","cost":"5","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":11,"ability":"Dexterity"}}]},{"name":"Plate Armor","cost":"1500","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":18}}]},{"name":"Ring Mail","cost":"30","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":14}}]},{"name":"Scale Mail","cost":"50","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":14,"ability":"Dexterity","maximum":2}}]},{"name":"Spiked Armor","cost":"75","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":14,"ability":"Dexterity","maximum":2}}]},{"name":"Splint Armor","cost":"200","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":17}}]},{"name":"Studded Leather Armor","cost":"45","slots":"Body, ","modifiers":[{"type":"armorClass","value":{"base":12,"ability":"Dexterity"}}]}]
                
                
                for(let i = 0; i < basicArmors.length; i++)
                {
                    let armor = basicArmors[i];
                    let pluses = [];
                
                    for(let inc = 1; inc <= 3; inc++)
                    {
                        let p = {
                            "name" : armor.name + " + " + inc,
                            "cost" : Number.parseInt(armor.cost) + floor( map(noise(i), 0,1,350 * inc * inc,650 * inc * inc)),
                            "slots" : "Body, ",
                            "modifiers": []
                        }
                        for(let m = 0; m < armor.modifiers.length; m++)
                        {
                            let mod = {};
                            for(let key in armor.modifiers[m])
                            {
                                mod[key] = clone(armor.modifiers[m][key]);
                            }
                            if(mod.type == "armorClass")
                            {
                                mod.value.base = armor.modifiers[m].value.base + inc;
                                p.modifiers.push(mod);
                            }
                        }
                        pluses.push(p);
                    }
                    list.push(basicArmors[i]);
                    let l = pluses.length;
                    for(let i = 0; i < l; i++)
                    {
                        let arm = pluses[i];
                        let mundaneResistVariant = {
                            "name" : "Resistant " + arm.name ,
                            "cost" : Number.parseInt(arm.cost) + floor(map(noise(i + 100), 0,1, 750,1250)),
                            "slots" : "Body, ",
                            "modifiers" : [] 
                        }
                        let fireResistVariant = 
                        {
                            "name" : "Fireproof " + arm.name,
                            "cost" : Number.parseInt(arm.cost) + floor(map(noise(i + 100), 0,1, 750,1250)),
                            "slots" : "Body, ",
                            "modifiers" : [] 
                        }
                        let thunderResistVariant = 
                        {
                            "name" : "Faraday " + arm.name,
                            "cost" : Number.parseInt(arm.cost) + floor(map(noise(i + 100), 0,1, 750,1250)),
                            "slots" : "Body, ",
                            "modifiers" : [] 
                        }
                        for(let m = 0; m < arm.modifiers.length; m++)
                        {
                            let mod = {};
                            for(let key in arm.modifiers[m])
                            {
                                mod[key] = clone(arm.modifiers[m][key]);
                            }
                            mundaneResistVariant.modifiers.push(mod);
                            fireResistVariant.modifiers.push(mod)
                            thunderResistVariant.modifiers.push(mod)
                        }
                        mundaneResistVariant.modifiers.push({"type" : "condition", "value" : {"name": "Resistant Armor", "duration" : "-1", "resistances" : "Slashing, Piercing, Bludgeoning, "}})
                        fireResistVariant.modifiers.push({"type" : "condition", "value" : {"name": "Resistant Armor", "duration" : "-1", "resistances" : "Fire, "}})
                        thunderResistVariant.modifiers.push({"type" : "condition", "value" : {"name": "Resistant Armor", "duration" : "-1", "resistances" : "Thunder, "}})

                        pluses.push(mundaneResistVariant);
                        pluses.push(fireResistVariant);
                        pluses.push(thunderResistVariant);

                    }
                    for(let i = 0; i < pluses.length; i++)
                    {
                        list.push(pluses[i]);
                    }

                    
                }
            }
            function addAbilityScoreItems(list)
            {
                for(let ab = 0; ab < abilityScores.length; ab++)
                {
                    let ability = abilityScores[ab];
                    for(let increase = 2; increase <= 8; increase+=2)
                    {
                        let str = ``;
                        let cost = 1000;
                        if(increase == 2)
                        {
                            cost = 100;
                            str = `Minor`;
                        }
                        if(increase == 6)
                        {
                            cost = 12000;
                            str = `Superior`
                        }
                        if(increase == 8)
                        {
                            cost = 60000;
                            str = `Divine`
                        }
                        let crown = 
                        { 
                            name : `Crown of ${str} ${ability}`, 
                            slots : "Forehead, ",
                            cost : floor( map(noise(ab), 0, 1, cost - (cost/4), cost + (cost/4)) ),
                            modifiers : [ {type :"abilityScoreIncrease", key : ability, value: increase } ]
                        }
                        list.push(crown);

                        let ring = 
                        { 
                            name : `Ring of ${str} ${ability}`, 
                            slots : "Fingers, ",
                            cost : floor( map(noise(ab+3), 0, 1, cost - (cost/4), cost + (cost/4)) ),
                            modifiers : [ {type :"abilityScoreIncrease", key : ability, value: increase } ]
                        }
                        list.push(ring);

                        
                        let earring = 
                        { 
                            name : `Earrings of ${str} ${ability}`, 
                            slots : "Ears, ",
                            cost : floor( map(noise(ab+2), 0, 1, cost - (cost/4), cost + (cost/4)) ),
                            modifiers : [ {type :"abilityScoreIncrease", key : ability, value: increase } ]
                        }
                        list.push(earring);
                        
                        let pendant = 
                        { 
                            name : `Pendant of ${str} ${ability}`, 
                            slots : "Neck, ",
                            cost : floor( map(noise(ab+1), 0, 1, cost - (cost/4), cost + (cost/4)) ),
                            modifiers : [ {type :"abilityScoreIncrease", key : ability, value: increase } ]
                        }
                        list.push(earring);
                    }
                }
            }
            
            function addCloaks(list)
            {
                
            }
            function addRandom(list)
            {
                list.push({"name" : "Shield" , "slots" : "Left Hand, Right Hand, ", "cost" : 10, "modifiers" : [ {"type" : "armorClassBonus", "value" : 2 }]})
                list.push({"name" : "Shield +1" , "slots" : "Left Hand, Right Hand, ", "cost" : 260, "modifiers" : [ {"type" : "armorClassBonus", "value" : 3 }]})
                list.push({"name" : "Shield +2" , "slots" : "Left Hand, Right Hand, ", "cost" : 520, "modifiers" : [ {"type" : "armorClassBonus", "value" : 4 }]})
                list.push({"name" : "Shield +3" , "slots" : "Left Hand, Right Hand, ", "cost" : 1040, "modifiers" : [ {"type" : "armorClassBonus", "value" : 5 }]})

                list.push({"name" : "Pendant of Minor Speed" , "slots" : "Neck, ", "cost" : 140, "modifiers" : [ {"type" : "condition", "value" : {"name": "Pendant of Minor Speed", "duration" : -1, "moveMod" : 0.25} }]})
                list.push({"name" : "Pendant of Speed" , "slots" : "Neck, ", "cost" : 560, "modifiers" : [ {"type" : "condition", "value" : {"name": "Pendant of Speed", "duration" : -1, "moveMod" : 0.5} }]})
                list.push({"name" : "Pendant of Greater Speed" , "slots" : "Neck, ", "cost" : 1840, "modifiers" : [ {"type" : "condition", "value" : {"name": "Pendant of Greater Speed", "duration" : -1, "moveMod" : 1} }]})
                list.push({"name" : "Boots of Minor Speed" , "slots" : "Feet, ", "cost" : 140, "modifiers" : [ {"type" : "condition", "value" : {"name": "Pendant of Minor Speed", "duration" : -1, "moveMod" : 0.25} }]})
                list.push({"name" : "Boots of Speed" , "slots" : "Feet, ", "cost" : 560, "modifiers" : [ {"type" : "condition", "value" : {"name": "Pendant of Speed", "duration" : -1, "moveMod" : 0.5} }]})
                list.push({"name" : "Boots of Greater Speed" , "slots" : "Feet, ", "cost" : 1840, "modifiers" : [ {"type" : "condition", "value" : {"name": "Pendant of Greater Speed", "duration" : -1, "moveMod" : 1} }]})

                list.push({"name" : "Ring of Sharpshooter" , "slots" : "Fingers, ", "cost" : 420,"modifiers" : [ {"type" : "actionMod", "filter" : {"name" : "bow"}, "value" : {"damageExtra" : 10, "toHitExtra" : -5} } ] })
                
                list.push({"name" : "Ring of Bludgeoned Skulls" , "slots" : "Fingers, ", "cost" : 580,"modifiers" : [ {"type" : "actionMod", "filter" : {"damageType" : "Bludgeoning"}, "value" : {"damageExtra" : 2} } ] })
                list.push({"name" : "Ring of Slashed Veins" , "slots" : "Fingers, ", "cost" : 410,"modifiers" : [ {"type" : "actionMod", "filter" : {"damageType" : "Slashing"}, "value" : {"damageExtra" : 2} } ] })
                list.push({"name" : "Ring of Pierced Heart" , "slots" : "Fingers, ", "cost" : 570,"modifiers" : [ {"type" : "actionMod", "filter" : {"damageType" : "Piercing"}, "value" : {"damageExtra" : 2} } ] })
                
                list.push({"name" : "Ring of Unarmed Strike (d4)" , "slots" : "Fingers, ", "cost" : 1120, "modifiers" : [ {"type" : "actionMod", "filter" : {"name" : "Unarmed Strike"}, "value" : {"damage" : "1d4"} } ] })
                list.push({"name" : "Ring of Unarmed Strike (d6)" , "slots" : "Fingers, ", "cost" : 1120, "modifiers" : [ {"type" : "actionMod", "filter" : {"name" : "Unarmed Strike"}, "value" : {"damage" : "1d6"} } ] })
                list.push({"name" : "Ring of Unarmed Strike (d8)" , "slots" : "Fingers, ", "cost" : 1120, "modifiers" : [ {"type" : "actionMod", "filter" : {"name" : "Unarmed Strike"}, "value" : {"damage" : "1d8"} } ] })
                list.push({"name" : "Ring of Unarmed Strike (d10)" , "slots" : "Fingers, ", "cost" : 1120, "modifiers" : [ {"type" : "actionMod", "filter" : {"name" : "Unarmed Strike"}, "value" : {"damage" : "1d10"} } ] })
                list.push({"name" : "Ring of Unarmed Strike (d12)" , "slots" : "Fingers, ", "cost" : 1120, "modifiers" : [ {"type" : "actionMod", "filter" : {"name" : "Unarmed Strike"}, "value" : {"damage" : "1d12"} } ] })
                
                list.push({"name" : "Ring of Mastery (Axes)" , "slots" : "Fingers, ", "cost" : 1810, "modifiers" : [ {"type" : "actionMod", "filter" : {"name" : "axe"}, "value" : {"condition" : {"name" : "Great Weapon Master", "notDealt" : "true"}} } ] })
                list.push({"name" : "Ring of Mastery (Bows)" , "slots" : "Fingers, ", "cost" : 2770, "modifiers" : [ {"type" : "actionMod", "filter" : {"name" : "bow"}, "value" : {"condition" : {"name" : "Great Weapon Master", "notDealt" : "true"}} } ] })
                list.push({"name" : "Ring of Mastery (Hammers)" , "slots" : "Fingers, ", "cost" : 1730, "modifiers" : [ {"type" : "actionMod", "filter" : {"name" : "hammer"}, "value" : {"condition" : {"name" : "Great Weapon Master", "notDealt" : "true"}} } ] })

                list.push({"name" : "Life Crown" , "slots" : "Forehead, ", "modifiers" : [ {"type" : "hitDieIncrease"} ] })
                list.push({"name" : "Life Cloak" , "slots" : "Shoulders, ", "modifiers" : [ {"type" : "hitDieAmount"} ] })
            }
            
            
            function writeItemsList(id, itemsList)
            {
                let listElt = ``;
                for(let i = 0 ; i < itemsList.length; i ++)
                {
                    let item = itemsList[i];

                    let filter = document.querySelector('#filterName');
                    let filterSlots = document.querySelector('#filterSlots');
                    if((!filter || !filter.value || item.name.includes(filter.value)) && (!filterSlots || !filterSlots.value || item.slots.includes(filterSlots.value)))
                    {
                        let divElt = `<div id="weapon${i}" class="itemHolder"> <h4> ${item.name} </h4> <p style="font-size:1rem;height:100%;"> ${item.slots} </p> <p class="tCenter gold" >${getCurrency(item.cost)} </p> <div id="modifiers${i}" class="modHolder"> `;
                        if(item.modifiers)
                        {
                            item.modifiers.forEach(m => 
                            {
                                divElt += getModifierItemDescription(m)
                            });
                        }
                        divElt += `</div> </div>`
                        listElt += `${divElt}`;
                    }
                }
                document.querySelector(`#${id}`).innerHTML = listElt ;
            }
            function getModifierItemDescription(itemModifier)
            {
                let divElt = ``;
                if(itemModifier.type == "abilityScoreIncrease")
                {
                    divElt += `<p> <b class="white"> Ability Score Increase </b> <br/> Your ${itemModifier.key} score increases by ${itemModifier.value}`
                }
                if(itemModifier.type == "armorClass")
                {
                    divElt += `<p> <b class="white"> Armor </b> <br/> Your Armor Class becomes ${itemModifier.value.base}`
                    if(itemModifier.value.ability){ divElt += ` + ${itemModifier.value.ability} `}
                    if(itemModifier.value.maximum){ divElt += `(Maximum :  ${itemModifier.value.maximum})`}
                    if(itemModifier.value.bonus){ divElt += ` + ${itemModifier.value.bonus}`}
                }
                if(itemModifier.type == "armorClassBonus")
                {
                    divElt += `<p> <b class="white"> Armor Class Bonus </b> <br/> Your Armor Class increases by ${itemModifier.value}`;
                }
                if(itemModifier.type == "actionMod")
                {
                    divElt += `<p> <b class="white"> Action Modification </b> <br/> If the Troop has an Action with `
                    for(let key in itemModifier.filter)
                    {
                        divElt += `key ${key} set to ${itemModifier.filter[key]}, `
                    }
                    for(let key in itemModifier.value)
                    {
                        divElt += `that Action's ${key} is modified.`
                    }
                }
                if(itemModifier.type == "action")
                {
                    let a = new Action(itemModifier.value);
                    divElt += `<p> <b class="white"> ${a.name} </b> <br/> ${a.describe()} </p>`;
                }
                if(itemModifier.type == "condition")
                {
                    let c = new Condition(itemModifier.value);
                    divElt += `<p> <b class="white"> ${c.name} </b> <br/> ${c.describe()} </p>`
                }
                if(itemModifier.type == "pool")
                {
                    for(let key in itemModifier.value)
                    {
                        divElt += `<p> You gain <b class="white"> ${itemModifier.value[key]}  ${key} </b>. </p>`;
                    }
                }
                if(itemModifier.type == "hitDieIncrease")
                {
                    divElt += `<p> <b class="white"> Hit Die Increase </b><br/> Your Hit Point dice increases by ${itemModifier.value} </p>`
                }
                if(itemModifier.type == "hitDieAmount")
                {
                    divElt += `<p> <b class="white"> Extra Hit Die </b><br/> You gain an extra Hit Points die. </p>`
                }
                return divElt;
            }
        </script>

    </div>
</body>

</html>